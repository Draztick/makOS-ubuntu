#!/bin/bash
# Written by Draztick

########  Update Section  ##############

echo "[*] Updating repositories..."

{
  apt update 2>/dev/null 
} 2>&1 > /dev/null

if [ $? -eq 0 ]; then
  echo "[+] Repositories updated successfully."
else
  echo "[-] Repositories failed to update."
fi

echo "[*] Updating packages..."

{
  apt upgrade -y 2>/dev/null
} 2>&1 > /dev/null

if [ $? -eq 0 ]; then
  echo "[+] Packages upgraded successfully."
else
  echo "[-] Packages failed to upgrade."
fi

########  In-repo installs  ###############

## Utilities ##

echo "[*] Installing utility tools (vim, curl, etc.)..."

{
  apt install -y curl vim 2>&1>/dev/null
} 2>&1 > /dev/null 

if [ $? -eq 0 ]; then
  echo "[+] Utility tools installed successfully."
else
  echo "[-] One or more utility tools failed to install."
fi

## Recon and Information Gathering ##

echo "[*] Installing Wireshark..."

export DEBIAN_FRONTEND=noninteractive

{
  apt install -yq wireshark 2>/dev/null
} 2>&1 > /dev/null

if [ $? -eq 0 ]; then
  echo "[+] Wireshark installed successfully"
  dpkg-reconfigure wireshark
else
  echo "[-] Wireshark failed to install."
fi

## Scanning Tools ##

echo "[*] Installing Nmap..."

{ 
  apt install -y nmap 2>/dev/null
} 2>&1 > /dev/null

if [ $? -eq 0 ]; then
  echo "[+] Nmap installed successfully."
else
  echo "[-] Nmap failed to install."
fi

## 

###### Make required directories #########

if [ -d /opt/ghidra ]; then
  echo "[-] Ghidra directory already exists."
else
  mkdir /opt/ghidra
  if [ $? -eq 0 ]; then
    echo "[+] Ghidra directory created."
  else
    echo "[-] Ghidra directory creation failed."
  fi
fi

if [ -d /opt/nessus ]; then
  echo "[-] Nessus directory already exists."
else
  mkdir /opt/nessus
  if [ $? -eq 0 ]; then
    echo "[+] Nessus directory created."
  else
    echo "[-] Nessus directory created failed."
  fi
fi

###### Manual Installations ###########

echo "[*] Installing Metasploit Framework..."

echo "[*] Downloading..."

{
  curl -s https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb > msfinstall && chmod +x ./msfinstall && ./msfinstall 2>&1>/dev/null
} 2>&1 > /dev/null

if [ $? -eq 0 ]; then 
  echo "[+] Metasploit installed successfully."
  rm ./msfinstall
else
  echo "[-] Metasploit failed to install. Leaving msfinstall file for troubleshooting purposes."
fi

{
  mkdir -p /etc/apt/keyrings && gpg --no-default-keyring --keyring /etc/apt/keyrings/bruno.gpg --keyserver keyserver.ubuntu.com --recv-keys 9FA6017ECABE0266 && echo "deb [signed-by=/etc/apt/keyrings/bruno.gpg] http://debian.usebruno.com/ bruno stable" | sudo tee /etc/apt/sources.list.d/bruno.list 
  
  sudo apt update 
  sudo apt install bruno
} 2>&1 > /dev/null

if [ $? -eq 0 ]; then
  echo "[+] Bruno successfully installed"
else
  echo "[-] Bruno failed to install."
fi


